<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>高级特性</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Wu, Shanliang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="css/main.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="commands.html"> UP </a>
 |
 <a accesskey="H" href="redis.html"> HOME </a>
</div><div id="content">
<h1 class="title">高级特性</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">备份和恢复</a>
<ul>
<li><a href="#sec-1-1">备份</a></li>
<li><a href="#sec-1-2">恢复</a></li>
<li><a href="#sec-1-3">bgsave</a></li>
</ul>
</li>
<li><a href="#sec-2">安全</a>
<ul>
<li><a href="#sec-2-1">设置密码</a></li>
<li><a href="#sec-2-2">验证密码</a></li>
</ul>
</li>
<li><a href="#sec-3">性能测试</a>
<ul>
<li><a href="#sec-3-1">可选参数</a></li>
<li><a href="#sec-3-2">实例</a></li>
</ul>
</li>
<li><a href="#sec-4">客户端连接</a>
<ul>
<li><a href="#sec-4-1">最大连接数</a></li>
<li><a href="#sec-4-2">客户端管理命令</a></li>
</ul>
</li>
<li><a href="#sec-5">管道</a>
<ul>
<li><a href="#sec-5-1">实例</a></li>
<li><a href="#sec-5-2">优势</a></li>
</ul>
</li>
<li><a href="#sec-6">分区</a>
<ul>
<li><a href="#sec-6-1">优势</a></li>
<li><a href="#sec-6-2">劣势</a></li>
<li><a href="#sec-6-3">类型</a>
<ul>
<li><a href="#sec-6-3-1">范围分区</a></li>
<li><a href="#sec-6-3-2">哈希分区</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-7">Java</a>
<ul>
<li><a href="#sec-7-1">安装</a></li>
<li><a href="#sec-7-2">连接</a></li>
<li><a href="#sec-7-3">string</a></li>
<li><a href="#sec-7-4">list</a></li>
<li><a href="#sec-7-5">key</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">备份和恢复</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">备份</h3>
<div class="outline-text-3" id="text-1-1">
<p>
SAVE命令用于创建当前数据库的备份，该命令将在redis安装目录中创建dump.rdb文件
</p>
<div class="org-src-container">

<pre class="src src-sh">/var/lib/redis $ ls -l

total 4
-rw-r--r-- 1 redis redis 328 Feb  5 23:02 dump.rdb

$ 127.0.0.1:6379&gt; SAVE 
OK

var/lib/redis $ ls -l 
total 4
-rw-r--r-- 1 redis redis 328 Feb 11 10:36 dump.rdb
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">恢复</h3>
<div class="outline-text-3" id="text-1-2">
<p>
如果需要恢复数据，只需将备份文件dump.rdb移动到redis安装目录并启动服务即可
</p>

<p>
获取redis安装目录可以使用CONFIG命令:
</p>
<div class="org-src-container">

<pre class="src src-sh">$ 127.0.0.1:6379&gt; config get dir  
1) <span style="color: #ffa07a;">"dir"</span>
2) <span style="color: #ffa07a;">"/var/lib/redis"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">bgsave</h3>
<div class="outline-text-3" id="text-1-3">
<p>
创建redis备份文件也可以使用命令BGSAVE，该命令在后台执行。
</p>
<div class="org-src-container">

<pre class="src src-sh">$ 127.0.0.1:6379&gt; BGSAVE

Background saving started
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">安全</h2>
<div class="outline-text-2" id="text-2">
<p>
通过设置密码参数，这样客户端连接到redis服务就需要密码验证，让redis服务更安全
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">设置密码</h3>
<div class="outline-text-3" id="text-2-1">
<p>
查看是否设置了密码验证
</p>
<div class="org-src-container">

<pre class="src src-sh">$ 127.0.0.1:6379&gt; CONFIG get requirepass
1) <span style="color: #ffa07a;">"requirepass"</span>
2) <span style="color: #ffa07a;">""</span>
</pre>
</div>
<p>
修改requirepass来设置密码
</p>
<div class="org-src-container">

<pre class="src src-sh">$ 127.0.0.1:6379&gt; CONFIG set requirepass <span style="color: #ffa07a;">"klose"</span>
OK
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">验证密码</h3>
<div class="outline-text-3" id="text-2-2">
<p>
使用auth命令来验证密码
</p>
<div class="org-src-container">

<pre class="src src-C">$ 127.0.0.1:6379&gt; CONFIG get requirepass
(error) NOAUTH <span style="color: #98fb98;">Authentication</span> <span style="color: #eedd82;">required</span>.

$ 127.0.0.1:6379&gt; auth <span style="color: #ffa07a;">"klose"</span>
OK

$ 127.0.0.1:6379&gt; CONFIG get requirepass
1) <span style="color: #ffa07a;">"requirepass"</span>
2) <span style="color: #ffa07a;">"klose"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">性能测试</h2>
<div class="outline-text-2" id="text-3">
<p>
redis-benchmark命令语法：
</p>
<div class="org-src-container">

<pre class="src src-sh">redis-benchmark [option] [option value]
</pre>
</div>
</div>
<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">可选参数</h3>
<div class="outline-text-3" id="text-3-1">
<table border="1" cellspacing="0" cellpadding="6" rules="all" frame="boader">
<caption class="t-above"><span class="table-number">Table 1:</span> redis-benchmark可选参数</caption>

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="right" />
</colgroup>
<tbody>
<tr>
<td class="left">参数</td>
<td class="left">描述</td>
<td class="right">默认值</td>
</tr>

<tr>
<td class="left">-h</td>
<td class="left">指定服务器主机名</td>
<td class="right">127.0.0.1</td>
</tr>

<tr>
<td class="left">-p</td>
<td class="left">指定服务器端口</td>
<td class="right">6379</td>
</tr>

<tr>
<td class="left">-s</td>
<td class="left">指定服务器socket</td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left">-c</td>
<td class="left">指定并发连接数</td>
<td class="right">50</td>
</tr>

<tr>
<td class="left">-n</td>
<td class="left">指定请求数</td>
<td class="right">10000</td>
</tr>

<tr>
<td class="left">-d</td>
<td class="left">以字节的形式指定SET/GET值的数据大小</td>
<td class="right">2</td>
</tr>

<tr>
<td class="left">-k</td>
<td class="left">1=keep alive， 0=reconnect</td>
<td class="right">1</td>
</tr>

<tr>
<td class="left">-r</td>
<td class="left">SET/GET/INCR使用随机key，SADD使用随机值</td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left">-P</td>
<td class="left">通过管道传输&lt;numreq&gt;请求</td>
<td class="right">1</td>
</tr>

<tr>
<td class="left">-q</td>
<td class="left">强制退出redis，仅显示query/sec值的数据大小</td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left">- -csv</td>
<td class="left">以CSV格式输出</td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left">-l</td>
<td class="left">生成循环，永久执行测试</td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left">-t</td>
<td class="left">仅运行以逗号分隔的测试命令列表</td>
<td class="right">&#xa0;</td>
</tr>

<tr>
<td class="left">-I</td>
<td class="left">Idle模式，仅打开N个idle连接并等待　｜</td>
<td class="right">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">实例</h3>
<div class="outline-text-3" id="text-3-2">
<p>
主机为 127.0.0.1，端口号为 6379，执行的命令为 set,lpush，请求数为 10000，通过-q参数让结果只显示每秒执行的请求数
</p>
<div class="org-src-container">

<pre class="src src-sh">$ sudo redis-benchmark -h 127.0.0.1 -p 6379 -t set,lpush -n 10000 -q
SET: 175438.59 requests per second
LPUSH: 178571.42 requests per second
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">客户端连接</h2>
<div class="outline-text-2" id="text-4">
<p>
Redis通过监听一个TCP端口或者Unix socket的方式来接收来自客户端的连接，当一个连接建立后Redis内部会进行以下一些操作：
</p>
<ol class="org-ol">
<li>客户端socket会被设置为非阻塞模式，因为Redis在网络事件处理上采用的是非阻塞多路复用模型
</li>
<li>为这个socket设置TCP_NODELAY属性，禁用Nagle算法
</li>
<li>创建一个可读的文件事件用于监听这个客户端socket的数据发送
</li>
</ol>
</div>


<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">最大连接数</h3>
<div class="outline-text-3" id="text-4-1">
<p>
查看最大连接数
</p>
<div class="org-src-container">

<pre class="src src-sh">127.0.0.1:6379&gt; CONFIG GET maxclients 
1) <span style="color: #ffa07a;">"maxclients"</span>
2) <span style="color: #ffa07a;">"4064"</span>
</pre>
</div>
<p>
服务启动时设置最大连接数为100000
</p>
<div class="org-src-container">

<pre class="src src-sh">$ sudo redis-server --maxclients 100000
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2">客户端管理命令</h3>
<div class="outline-text-3" id="text-4-2">
<table border="1" cellspacing="0" cellpadding="6" rules="all" frame="boader">
<caption class="t-above"><span class="table-number">Table 2:</span> 客户端管理命令</caption>

<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">命令</td>
<td class="left">描述</td>
</tr>

<tr>
<td class="left">CLIENT LIST</td>
<td class="left">返回连接到redis服务的客户端列表</td>
</tr>

<tr>
<td class="left">CLIENT SETNAME</td>
<td class="left">设置当前连接的名称</td>
</tr>

<tr>
<td class="left">CLIENT GETNAME</td>
<td class="left">获取通过CLIENT SETNAME命令设置的服务名称</td>
</tr>

<tr>
<td class="left">CLIENT PAUSE</td>
<td class="left">挂起客户端连接，指定挂起的时间以毫秒计</td>
</tr>

<tr>
<td class="left">CLIENT KILL</td>
<td class="left">关闭客户端连接</td>
</tr>
</tbody>
</table>

<p>
列出所有的客户端连接
</p>
<div class="org-src-container">

<pre class="src src-sh">$ 127.0.0.1:6379&gt; client list 

<span style="color: #eedd82;">id</span>=1604 <span style="color: #eedd82;">addr</span>=127.0.0.1:46412 <span style="color: #eedd82;">fd</span>=5 <span style="color: #eedd82;">name</span>= <span style="color: #eedd82;">age</span>=240 <span style="color: #eedd82;">idle</span>=0 <span style="color: #eedd82;">flags</span>=N <span style="color: #eedd82;">db</span>=0 <span style="color: #eedd82;">sub</span>=0 <span style="color: #eedd82;">psub</span>=0 <span style="color: #eedd82;">multi</span>=-1 <span style="color: #eedd82;">qbuf</span>=0 qbuf-free=32768 <span style="color: #eedd82;">obl</span>=0 <span style="color: #eedd82;">oll</span>=0 <span style="color: #eedd82;">omem</span>=0 <span style="color: #eedd82;">events</span>=r <span style="color: #eedd82;">cmd</span>=client
<span style="color: #eedd82;">id</span>=1605 <span style="color: #eedd82;">addr</span>=127.0.0.1:46472 <span style="color: #eedd82;">fd</span>=6 <span style="color: #eedd82;">name</span>= <span style="color: #eedd82;">age</span>=4 <span style="color: #eedd82;">idle</span>=4 <span style="color: #eedd82;">flags</span>=N <span style="color: #eedd82;">db</span>=0 <span style="color: #eedd82;">sub</span>=0 <span style="color: #eedd82;">psub</span>=0 <span style="color: #eedd82;">multi</span>=-1 <span style="color: #eedd82;">qbuf</span>=0 qbuf-free=0 <span style="color: #eedd82;">obl</span>=0 <span style="color: #eedd82;">oll</span>=0 <span style="color: #eedd82;">omem</span>=0 <span style="color: #eedd82;">events</span>=r <span style="color: #eedd82;">cmd</span>=command
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">管道</h2>
<div class="outline-text-2" id="text-5">
<p>
Redis是一种基于客户端-服务端模型以及请求/响应协议的TCP服务：
</p>
<ol class="org-ol">
<li>客户端向服务端发送一个查询请求，并监听Socket返回，通常是以阻塞模式等待服务端响应
</li>
<li>服务端处理命令，并将结果返回给客户端
</li>
</ol>

<p>
管道技术可以在服务端未响应时，客户端可以继续向服务端发送请求，并最终一次性读取所有服务端的响应
</p>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">实例</h3>
<div class="outline-text-3" id="text-5-1">
<p>
启动redis服务器后，在终端输入以下命令(需要安装netcat这个软件)：
</p>
<div class="org-src-container">

<pre class="src src-sh">$ (<span style="color: #b0c4de;">echo</span> -en <span style="color: #ffa07a;">"AUTH klose\r\n PING\r\n SET runoobkey redis\r\nGET runoobkey\r\nINCR visitor\r\nINCR visitor\r\nINCR visitor\r\n"</span>; sleep 10) | nc localhost 6379 

+OK
+PONG
+OK
$<span style="color: #eedd82;">5</span>
redis
:1
:2
:3
</pre>
</div>
<p>
首先输入密码，然后用PING命令查看redis服务是否可用， 之后设置了runoobkey的值为redis，然后我们获取runoobkey的值并使得visitor自增3次
</p>

<p>
在返回的结果中可以看到这些命令一次性向redis服务提交，并最终一次性读取所有服务端的响应
</p>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">优势</h3>
<div class="outline-text-3" id="text-5-2">
<p>
管道技术最显著的优势是提高了redis服务的性能
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">分区</h2>
<div class="outline-text-2" id="text-6">
<p>
分区是分割数据到多个Redis实例的处理过程，每个实例只保存key的一个子集
</p>
</div>

<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1">优势</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>利用多台计算机内存的和值，允许构造更大的数据库
</li>
<li>多核和多台计算机，允许扩展计算能力
</li>
<li>多台计算机和网络适配器，允许扩展网络带宽
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2">劣势</h3>
<div class="outline-text-3" id="text-6-2">
<ul class="org-ul">
<li>涉及多个key的操作通常是不被支持的：比如当两个set映射到不同的redis实例上时，就不能对这两个set执行交集操作
</li>
<li>涉及多个key的redis事务不能使用
</li>
<li>当使用分区时数据处理较为复杂：比如你需要处理多个rdb/aof文件，并且从多个实例和主机备份持久化文件
</li>
<li>增加或删除容量也比较复杂：redis集群大多数支持在运行时增加、删除节点的透明数据平衡的能力，但是类似于客户端分区、代理等其他系统则不支持这项特性
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3">类型</h3>
<div class="outline-text-3" id="text-6-3">
<p>
假设有4个Redis实例R0，R1，R2，R3，和类似user:1，user:2这样的表示用户的多个key，对既定的key有多种不同方式来选择这个key存放在哪个实例中
</p>
</div>

<div id="outline-container-sec-6-3-1" class="outline-4">
<h4 id="sec-6-3-1">范围分区</h4>
<div class="outline-text-4" id="text-6-3-1">
<p>
最简单的分区方式是按范围分区，就是映射一定范围的对象到特定的Redis实例
</p>

<p>
比如ID从0到10000的用户会保存到实例R0，ID从10001到20000的用户会保存到R1以此类推
</p>

<p>
这种方式是可行的，不足就是要有一个区间范围到实例的映射表。这个表要被管理，同时还需要各种对象的映射表
</p>
</div>
</div>

<div id="outline-container-sec-6-3-2" class="outline-4">
<h4 id="sec-6-3-2">哈希分区</h4>
<div class="outline-text-4" id="text-6-3-2">
<ol class="org-ol">
<li>用一个hash函数将key转换为一个数字，比如使用crc32 hash函数。对key foobar执行crc32(foobar)会输出类似93024922的整数
</li>
<li>对这个整数取模，将其转化为0-3之间的数字，就可以将这个整数映射到4个Redis实例中的一个了。93024922 % 4 = 2，就是说key foobar应该被存到R2实例中
</li>
</ol>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">Java</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1">安装</h3>
<div class="outline-text-3" id="text-7-1">
<ol class="org-ol">
<li>确保已经安装了redis服务且你的机器上能正常使用Java
</li>
<li>下载jedis.jar驱动包
</li>
<li>在classpath中包含该驱动包
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2">连接</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">import</span> <span style="color: #7fffd4;">redis</span>.<span style="color: #7fffd4;">clients</span>.<span style="color: #7fffd4;">jedis</span>.<span style="color: #98fb98;">Jedis</span>;

<span style="color: #00ffff;">public</span> <span style="color: #00ffff;">class</span> <span style="color: #98fb98;">RedisJava</span> {
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">main</span>(<span style="color: #98fb98;">String</span>[] <span style="color: #eedd82;">args</span>) {
        <span style="color: #ff4500;">//</span><span style="color: #ff4500;">&#36830;&#25509;&#26412;&#22320;&#30340; Redis &#26381;&#21153;</span>
        <span style="color: #98fb98;">Jedis</span> <span style="color: #eedd82;">jedis</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Jedis</span>(<span style="color: #ffa07a;">"localhost"</span>);
        System.out.println(<span style="color: #ffa07a;">"Connection to server sucessfully"</span>);
        <span style="color: #ff4500;">//</span><span style="color: #ff4500;">&#26597;&#30475;&#26381;&#21153;&#26159;&#21542;&#36816;&#34892;</span>
        System.out.println(<span style="color: #ffa07a;">"Server is running: "</span>+jedis.ping());
    }
}
</pre>
</div>
<p>
测试代码：
</p>
<div class="org-src-container">

<pre class="src src-sh">$ javac RedisJava.java
$ java RedisJava

Connection to server sucessfully
Server is running: PONG

Redis Java String Example
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3">string</h3>
<div class="outline-text-3" id="text-7-3">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">import</span> <span style="color: #7fffd4;">redis</span>.<span style="color: #7fffd4;">clients</span>.<span style="color: #7fffd4;">jedis</span>.<span style="color: #98fb98;">Jedis</span>;

<span style="color: #00ffff;">public</span> <span style="color: #00ffff;">class</span> <span style="color: #98fb98;">RedisStringJava</span> {
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">main</span>(<span style="color: #98fb98;">String</span>[] <span style="color: #eedd82;">args</span>) {
        <span style="color: #ff4500;">//</span><span style="color: #ff4500;">&#36830;&#25509;&#26412;&#22320;&#30340; Redis &#26381;&#21153;</span>
        <span style="color: #98fb98;">Jedis</span> <span style="color: #eedd82;">jedis</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Jedis</span>(<span style="color: #ffa07a;">"localhost"</span>);
        System.out.println(<span style="color: #ffa07a;">"Connection to server sucessfully"</span>);
        <span style="color: #ff4500;">//</span><span style="color: #ff4500;">&#35774;&#32622; redis &#23383;&#31526;&#20018;&#25968;&#25454;</span>
        jedis.set(<span style="color: #ffa07a;">"runoobkey"</span>, <span style="color: #ffa07a;">"Redis tutorial"</span>);
        <span style="color: #ff4500;">// </span><span style="color: #ff4500;">&#33719;&#21462;&#23384;&#20648;&#30340;&#25968;&#25454;&#24182;&#36755;&#20986;</span>
        System.out.println(<span style="color: #ffa07a;">"Stored string in redis:: "</span>+ jedis.get(<span style="color: #ffa07a;">"runoobkey"</span>));
    }
}
</pre>
</div>
<p>
测试代码：
</p>
<div class="org-src-container">

<pre class="src src-sh">$ javac RedisStringJava.java
$ java RedisStringJava

Connection to server sucessfully
Stored string<span style="color: #00ffff;"> in</span> redis:: Redis tutorial
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4">list</h3>
<div class="outline-text-3" id="text-7-4">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">import</span> <span style="color: #7fffd4;">redis</span>.<span style="color: #7fffd4;">clients</span>.<span style="color: #7fffd4;">jedis</span>.<span style="color: #98fb98;">Jedis</span>;

<span style="color: #00ffff;">public</span> <span style="color: #00ffff;">class</span> <span style="color: #98fb98;">RedisListJava</span> {
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">main</span>(<span style="color: #98fb98;">String</span>[] <span style="color: #eedd82;">args</span>) {
        <span style="color: #ff4500;">//</span><span style="color: #ff4500;">&#36830;&#25509;&#26412;&#22320;&#30340; Redis &#26381;&#21153;</span>
        <span style="color: #98fb98;">Jedis</span> <span style="color: #eedd82;">jedis</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Jedis</span>(<span style="color: #ffa07a;">"localhost"</span>);
        System.out.println(<span style="color: #ffa07a;">"Connection to server sucessfully"</span>);
        <span style="color: #ff4500;">//</span><span style="color: #ff4500;">&#23384;&#20648;&#25968;&#25454;&#21040;&#21015;&#34920;&#20013;</span>
        jedis.lpush(<span style="color: #ffa07a;">"tutorial-list"</span>, <span style="color: #ffa07a;">"Redis"</span>);
        jedis.lpush(<span style="color: #ffa07a;">"tutorial-list"</span>, <span style="color: #ffa07a;">"Mongodb"</span>);
        jedis.lpush(<span style="color: #ffa07a;">"tutorial-list"</span>, <span style="color: #ffa07a;">"Mysql"</span>);
        <span style="color: #ff4500;">// </span><span style="color: #ff4500;">&#33719;&#21462;&#23384;&#20648;&#30340;&#25968;&#25454;&#24182;&#36755;&#20986;</span>
        <span style="color: #98fb98;">List</span>&lt;<span style="color: #98fb98;">String</span>&gt; <span style="color: #eedd82;">list</span> = jedis.lrange(<span style="color: #ffa07a;">"tutorial-list"</span>, 0 ,5);
        <span style="color: #00ffff;">for</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>=0; i&lt;list.<span style="color: #98fb98;">size</span>(); i++) {
            System.out.println(<span style="color: #ffa07a;">"Stored string in redis:: "</span>+list.get(i));
        }
    }
}
</pre>
</div>
<p>
测试代码：
</p>
<div class="org-src-container">

<pre class="src src-sh">$ javac RedisListJava.java
$ java RedisListJava

Connection to server sucessfully
Stored string<span style="color: #00ffff;"> in</span> redis:: Redis
Stored string<span style="color: #00ffff;"> in</span> redis:: Mongodb
Stored string<span style="color: #00ffff;"> in</span> redis:: Mysql
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-5" class="outline-3">
<h3 id="sec-7-5">key</h3>
<div class="outline-text-3" id="text-7-5">
<div class="org-src-container">

<pre class="src src-java"><span style="color: #00ffff;">import</span> <span style="color: #7fffd4;">redis</span>.<span style="color: #7fffd4;">clients</span>.<span style="color: #7fffd4;">jedis</span>.<span style="color: #98fb98;">Jedis</span>;

<span style="color: #00ffff;">public</span> <span style="color: #00ffff;">class</span> <span style="color: #98fb98;">RedisKeyJava</span> {
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">main</span>(<span style="color: #98fb98;">String</span>[] <span style="color: #eedd82;">args</span>) {
        <span style="color: #ff4500;">//</span><span style="color: #ff4500;">&#36830;&#25509;&#26412;&#22320;&#30340; Redis &#26381;&#21153;</span>
        <span style="color: #98fb98;">Jedis</span> <span style="color: #eedd82;">jedis</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">Jedis</span>(<span style="color: #ffa07a;">"localhost"</span>);
        System.out.println(<span style="color: #ffa07a;">"Connection to server sucessfully"</span>);

        <span style="color: #ff4500;">// </span><span style="color: #ff4500;">&#33719;&#21462;&#25968;&#25454;&#24182;&#36755;&#20986;</span>
        <span style="color: #98fb98;">List</span>&lt;<span style="color: #98fb98;">String</span>&gt; <span style="color: #eedd82;">list</span> = jedis.keys(<span style="color: #ffa07a;">"*"</span>);
        <span style="color: #00ffff;">for</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>=0; i&lt;list.<span style="color: #98fb98;">size</span>(); i++) {
            System.out.println(<span style="color: #ffa07a;">"List of stored keys:: "</span>+list.get(i));
        }
    }
}
</pre>
</div>
<p>
测试代码：
</p>
<div class="org-src-container">

<pre class="src src-sh">$ javac RedisKeyJava.java
$ java RedisKeyJava

Connection to server sucessfully
List of stored keys:: tutorial-name
List of stored keys:: tutorial-list
</pre>
</div>

<p>
<a href="commands.html">Previous：命令</a>
</p>

<p>
<a href="redis.html">Home：目录</a>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

     <br/>
    <div class='ds-thread'></div>
<script>
var duoshuoQuery = {short_name:'klose911'};
(function() {
	 var dsThread = document.getElementsByClassName('ds-thread')[0];
         dsThread.setAttribute('data-thread-key', document.title);
         dsThread.setAttribute('data-title', document.title);
         dsThread.setAttribute('data-url', window.location.href);
	 var ds = document.createElement('script');
	 ds.type = 'text/javascript';ds.async = true;
	 ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	 ds.charset = 'UTF-8';
	 (document.getElementsByTagName('head')[0] 
				       || document.getElementsByTagName('body')[0]).appendChild(ds);
				       })();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-90850421-1', 'auto');
  ga('send', 'pageview');
</script>
</div>
</body>
</html>
