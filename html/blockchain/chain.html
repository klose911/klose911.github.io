<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>区块链入门（作者：阮一峰）</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Wu, Shanliang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="css/main.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">区块链入门（作者：阮一峰）</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgdf98968">本质</a></li>
<li><a href="#orga7a2714">特点</a></li>
<li><a href="#org3d4c533">区块</a></li>
<li><a href="#orgab08ae0">哈希的不可修改性</a></li>
<li><a href="#orgd4232e5">挖矿</a></li>
<li><a href="#orgba61786">难度系数</a>
<ul>
<li><a href="#orgb1c5e51">动态调节</a></li>
</ul>
</li>
<li><a href="#orgcb07066">分叉</a></li>
<li><a href="#orge7c4f0a">总结</a></li>
</ul>
</div>
</div>
<p>
区块链是眼下的大热门，新闻媒体大量报道，宣称它将创造未来
</p>


<div class="figure">
<p><img src="pic/1.jpg" alt="1.jpg" width="30%" />  
</p>
</div>

<pre class="example">
虽然它不是很难的东西，核心概念非常简单，几句话就能说清楚

希望读完本文，你不仅可以理解区块链，还会明白什么是挖矿、为什么挖矿越来越难等问题
</pre>
<div id="outline-container-orgdf98968" class="outline-2">
<h2 id="orgdf98968">本质</h2>
<div class="outline-text-2" id="text-orgdf98968">
<p>
区块链是什么？一句话，它是一种特殊的 <b>分布式数据库</b> 
</p>


<div class="figure">
<p><img src="pic/2.png" alt="2.png" width="50%" />  
</p>
</div>

<ol class="org-ol">
<li>区块链的主要作用是 <span class="underline">储存</span> 信息：任何需要保存的信息，都可以写入区块链，也可以从里面读取，所以它是数据库</li>
<li>任何人都可以架设服务器，加入区块链网络，成为一个节点。区块链的世界里面， <b>没有</b> <span class="underline">中心节点</span> ，每个节点都是平等的，都保存着整个数据库
<ul class="org-ul">
<li>你可以向任何一个节点，写入/读取数据，因为所有节点最后都会同步，保证区块链一致</li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-orga7a2714" class="outline-2">
<h2 id="orga7a2714">特点</h2>
<div class="outline-text-2" id="text-orga7a2714">
<pre class="example">
分布式数据库并非新发明，市场上早有此类产品
</pre>
<p>
但是，区块链有一个革命性特点：区块链没有管理员，它是 <b>彻底无中心</b> 的：
</p>
<ul class="org-ul">
<li>其他的数据库都有管理员，但是区块链没有。如果有人想对区块链添加审核，也实现不了，因为它的设计目标就是防止出现居于中心地位的管理当局</li>
<li>正是因为无法管理，区块链才能做到无法被控制。否则一旦大公司大集团控制了管理权，他们就会控制整个平台，其他使用者就都必须听命于他们了</li>
</ul>

<pre class="example">
但是，没有了管理员，人人都可以往里面写入数据，怎么才能保证数据是可信的呢？被坏人改了怎么办？
</pre>
</div>
</div>

<div id="outline-container-org3d4c533" class="outline-2">
<h2 id="org3d4c533">区块</h2>
<div class="outline-text-2" id="text-org3d4c533">
<p>
区块链由一个个 <span class="underline">区块</span>  组成。区块很像数据库的记录，每次写入数据，就是 <b>创建</b> 一个区块
</p>


<div class="figure">
<p><img src="pic/3.png" alt="3.png" width="50%" />  
</p>
</div>

<p>
每个区块包含两个部分：
</p>
<ol class="org-ol">
<li>区块头（Head）：记录当前 <span class="underline">区块的特征值</span> 
<ul class="org-ul">
<li>生成时间</li>
<li>实际数据（即区块体）的哈希</li>
<li>上一个区块的哈希</li>
<li>&#x2026;</li>
</ul></li>
<li><p>
区块体（Body）：实际数据
</p>


<div class="figure">
<p><img src="pic/4.png" alt="4.png" width="50%" />  
</p>
</div></li>
</ol>

<pre class="example">
这里，你需要理解什么叫哈希，这是理解区块链必需的

所谓"哈希"就是计算机可以对任意内容，计算出一个长度相同的特征值。区块链的 哈希长度是256位，这就是说，不管原始内容是什么，最后都会计算出一个256位的二进制数字。而且可以保证，只要原始内容不同，对应的哈希一定是不同的

举例来说，字符串123的哈希是a8fdc205a9f19cc1c7507a60c4f01b13d11d7fd0（十六进制），转成二进制就是256位，而且只有123能得到这个哈希。（理论上，其他字符串也有可能得到这个哈希，但是概率极低，可以近似认为不可能发生。）
</pre>

<p>
因此，就有两个重要的推论:
</p>
<ol class="org-ol">
<li>每个区块的哈希都是不一样的，可以通过哈希标识区块</li>
<li>如果区块的内容变了，它的哈希一定会改变</li>
</ol>
</div>
</div>

<div id="outline-container-orgab08ae0" class="outline-2">
<h2 id="orgab08ae0">哈希的不可修改性</h2>
<div class="outline-text-2" id="text-orgab08ae0">
<p>
区块与哈希是一一对应的， <span class="underline">每个区块的哈希</span> 都是针对 <span class="underline">区块头</span> 计算的。也就是说，把区块头的各项特征值，按照顺序连接在一起，组成一个很长的字符串，再对这个字符串计算哈希 
</p>

<pre class="example">
Hash = SHA256( 区块头 )
</pre>

<p>
上面就是区块哈希的计算公式，其中 <span class="underline">SHA256</span> 是区块链的哈希算法
</p>

<pre class="example">
注意，这个公式里面只包含区块头，不包含区块体，也就是说，哈希由区块头唯一决定
</pre>

<p>
前面说过，区块头包含很多内容，其中有当前区块体的哈希，还有上一个区块的哈希。这意味着，如果 <span class="underline">当前区块体的内容</span> 变了，或者 <span class="underline">上一个区块的哈希</span> 变了，一定会 <b>引起</b> 当前 <span class="underline">区块的哈希改变</span>  
</p>

<pre class="example">
这一点对区块链有重大意义

如果有人修改了一个区块，该区块的哈希就变了。为了让后面的区块还能连到它（因为下一个区块包含上一个区块的哈希），该人必须依次修改后面所有的区块，否则被改掉的区块就脱离区块链了

由于后面要提到的原因，哈希的计算很耗时，短时间内修改多个区块几乎不可能发生，除非有人掌握了全网51%以上的计算能力
</pre>

<p>
正是通过这种联动机制，区块链保证了自身的可靠性，数据一旦写入，就无法被篡改。这就像历史一样，发生了就是发生了，从此再无法改变
</p>


<div class="figure">
<p><img src="pic/5.png" alt="5.png" width="50%" />  
</p>
</div>

<pre class="example">
每个区块都连着上一个区块，这也是"区块链"这个名字的由来
</pre>
</div>
</div>

<div id="outline-container-orgd4232e5" class="outline-2">
<h2 id="orgd4232e5">挖矿</h2>
<div class="outline-text-2" id="text-orgd4232e5">
<p>
由于必须保证节点之间的同步，所以新区块的添加速度不能太快
</p>
<pre class="example">
试想一下，刚刚同步了一个区块，准备基于它生成下一个区块，但这时别的节点又有新区块生成，就不得不放弃做了一半的计算，再次去同步

因为每个区块的后面，只能跟着一个区块，永远只能在最新区块的后面，生成下一个区块。所以，别无选择，一听到信号，就必须立刻同步
</pre>

<p>
所以，区块链的发明者中本聪故意让添加新区块，变得很困难。他的设计是，平均每10分钟，全网才能生成一个新区块，一小时也就六个
</p>
<pre class="example">
这种产出速度不是通过命令达成的，而是故意设置了海量的计算

也就是说，只有通过极其大量的计算，才能得到当前区块的有效哈希，从而把新区块添加到区块链。由于计算量太大，所以快不起来
</pre>

<p>
这个过程就叫做 <span class="underline">采矿</span> ，因为计算有效哈希的难度，好比在全世界的沙子里面，找到一粒符合条件的沙子。计算哈希的机器就叫做矿机，操作矿机的人就叫做矿工
</p>
</div>
</div>
<div id="outline-container-orgba61786" class="outline-2">
<h2 id="orgba61786">难度系数</h2>
<div class="outline-text-2" id="text-orgba61786">
<pre class="example">
读到这里，你可能会有一个疑问，人们都说采矿很难，可是采矿不就是用计算机算出一个哈希吗，这正是计算机的强项啊，怎么会变得很难，迟迟算不出来呢？
</pre>
<p>
原来不是任意一个哈希都可以，只有满足条件的哈希才会被区块链接受。这个条件特别苛刻，使得绝大部分哈希都不满足要求，必须重算。区块头包含一个 <span class="underline">难度系数</span> ，这个值决定了计算哈希的难度。举例来说，第100000个区块的难度系数是 14484.16236122 
</p>


<div class="figure">
<p><img src="pic/6.png" alt="6.png" width="50%" />  
</p>
</div>

<p>
区块链协议规定，使用一个 <span class="underline">常量</span> 除以 <span class="underline">难度系数</span> ，可以得到 <span class="underline">目标值</span> 。显然，难度系数越大，目标值就越小
</p>


<div class="figure">
<p><img src="pic/7.png" alt="7.png" width="50%" />  
</p>
</div>

<p>
哈希的有效性跟目标值密切相关，只有小于目标值的哈希才是有效的，否则哈希无效，必须重算
</p>
<pre class="example">
由于目标值非常小，哈希小于该值的机会极其渺茫，可能计算10亿次，才算中一次

这就是采矿如此之慢的根本原因
</pre>

<p>
前面说过，当前区块的哈希由区块头唯一决定。如果要对 <span class="underline">同一个区块</span> <b>反复</b> <span class="underline">计算哈希</span> ，就意味着， <span class="underline">区块头</span> <b>必须不停地</b> <span class="underline">变化</span> ，否则不可能算出不一样的哈希。区块头里面所有的特征值都是固定的，为了让区块头产生变化，中本聪 <b>故意增加</b> 了一个 <span class="underline">随机项</span> ，叫做 <span class="underline">Nonce</span>  。Nonce 是一个随机值，矿工的作用其实就是 <b>猜出 Nonce 的值</b> ，使得区块头的哈希可以小于目标值，从而能够写入区块链
</p>
<pre class="example">
Nonce 是非常难猜的，目前只能通过穷举法一个个试错。根据协议，Nonce 是一个32位的二进制值，即最大可以到21.47亿。第 100000 个区块的 Nonce 值是274148111，可以理解成，矿工从0开始，一直计算了 2.74 亿次，才得到了一个有效的 Nonce 值，使得算出的哈希能够满足条件

运气好的话，也许一会就找到了 Nonce。运气不好的话，可能算完了21.47亿次，都没有发现 Nonce，即当前区块体不可能算出满足条件的哈希。这时，协议允许矿工改变区块体，开始新的计算
</pre>
</div>
<div id="outline-container-orgb1c5e51" class="outline-3">
<h3 id="orgb1c5e51">动态调节</h3>
<div class="outline-text-3" id="text-orgb1c5e51">
<pre class="example">
采矿具有随机性，没法保证正好十分钟产出一个区块，有时一分钟就算出来了，有时几个小时可能也没结果

总体来看，随着硬件设备的提升，以及矿机的数量增长，计算速度一定会越来越快
</pre>
<p>
为了将产出速率恒定在十分钟，中本聪还设计了难度系数的动态调节机制
</p>
<pre class="example">
他规定，难度系数每两周（2016个区块）调整一次

如果这两周里面，区块的平均生成速度是9分钟，就意味着比法定速度快了10%，因此接下来的难度系数就要调高10%

如果平均生成速度是11分钟，就意味着比法定速度慢了10%，因此接下来的难度系数就要调低10%
</pre>
<p>
难度系数越调越高（目标值越来越小），导致了采矿越来越难
</p>
</div>
</div>
</div>
<div id="outline-container-orgcb07066" class="outline-2">
<h2 id="orgcb07066">分叉</h2>
<div class="outline-text-2" id="text-orgcb07066">
<p>
即使区块链是可靠的，现在还有一个问题没有解决：如果两个人同时向区块链写入数据，也就是说，同时有两个区块加入，因为它们都连着前一个区块，就形成了分叉。这时应该采纳哪一个区块呢？
</p>


<div class="figure">
<p><img src="pic/8.png" alt="8.png" width="50%" />  
</p>
</div>

<p>
现在的规则是，新节点总是采用 <span class="underline">最长的那条区块链</span> 。如果区块链有分叉，将看哪个分支在分叉点后面，先达到6个新区块（称为"六次确认"）。按照10分钟一个区块计算，一小时就可以确认
</p>


<div class="figure">
<p><img src="pic/9.png" alt="9.png" width="50%" />  
</p>
</div>

<p>
由于新区块的生成速度由计算能力决定，所以这条规则就是说，拥有 <b>大多数计算能力</b> 的那条分支，就是正宗的区块链
</p>
</div>
</div>

<div id="outline-container-orge7c4f0a" class="outline-2">
<h2 id="orge7c4f0a">总结</h2>
<div class="outline-text-2" id="text-orge7c4f0a">
<p>
区块链作为无人管理的分布式数据库，从2009年开始已经运行了8年，没有出现大的问题。这证明它是可行的。但是，为了保证数据的可靠性，区块链也有自己的代价：
</p>
<ul class="org-ul">
<li>效率，数据写入区块链，最少要等待十分钟，所有节点都同步数据，则需要更多的时间</li>
<li>能耗，区块的生成需要矿工进行无数无意义的计算，这是非常耗费能源的。</li>
</ul>

<p>
因此，区块链的适用场景，其实非常有限：
</p>
<ol class="org-ol">
<li>不存在所有成员都信任的管理当局</li>
<li>写入的数据不要求实时使用</li>
<li>挖矿的收益能够弥补本身的成本</li>
</ol>

<pre class="example">
目前，区块链最大的应用场景（可能也是唯一的应用场景），就是以比特币为代表的加密货币
</pre>

<p>
如果无法满足上述的条件，那么传统的数据库是更好的解决方案
</p>
</div>
</div>
</div>
<div id="postamble" class="status">

		  <br/>
		  <div class='ds-thread'></div>
		  <script>
		  var duoshuoQuery = {short_name:'klose911'};
		  (function() {
					  var dsThread = document.getElementsByClassName('ds-thread')[0];
					  dsThread.setAttribute('data-thread-key', document.title);
					  dsThread.setAttribute('data-title', document.title);
					  dsThread.setAttribute('data-url', window.location.href);
					  var ds = document.createElement('script');
					  ds.type = 'text/javascript';ds.async = true;
					  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
					  ds.charset = 'UTF-8';
					  (document.getElementsByTagName('head')[0] 
						|| document.getElementsByTagName('body')[0]).appendChild(ds);
					  })();
		  </script>
		  <script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		  ga('create', 'UA-90850421-1', 'auto');
		  ga('send', 'pageview');
		  </script>
</div>
</body>
</html>
