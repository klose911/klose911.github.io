#+TITLE: Linux 实现
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="../css/main.css" />
#+HTML_LINK_UP: ./rpi-os.html
#+HTML_LINK_HOME: ./interrupt.html
#+OPTIONS: num:nil timestamp:nil ^:nil

* 底层异常处理
#+begin_example
  如何在庞大的Linux内核源代码, 找到负责中断处理的代码？

  这里提出一个想法，向量表的基地址应存储在vbar_el1 寄存器中, 因此, 如果搜索 vbar_el1, 则应该能够弄清楚向量表的初始化位置
#+end_example

搜索提供了一些这个寄存器的用法, 其中之一属于已经熟悉的 head.S 。 这段代码位于__primary_switched 函数内部，MMU 打开后执行此函数：

#+begin_src asm 
	  adr_l    x8, vectors            // load VBAR_EL1 with virtual
	  msr    vbar_el1, x8            // vector table address
#+end_src


* 中断控制器

* 计时器

